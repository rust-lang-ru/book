# Написание самоматизированных проверок

В своём эссе 1972 года “The Humble Programmer,” Edsger W. Dijkstra сказал, что «Проверка программы может быть очень производительным способом показать наличие ошибок, но это безнадёжно неадекватно для показа их отсутствия». Это не значит, что мы не должны пытаться проверять столько, сколько мы можем!

Соблюдение правил программы считается то, в какой степени наша рукопись выполняет именно то, что мы задумывали. Ржавчина разработана с учётом большой озабоченности соблюдением правил программ, но соблюдение правил сложна и нелегко доказуема. Система определения Ржавчины берёт на себя огромную часть этого бремени, но она не может уловить безусловно все сбои. Поэтому в Ржавчине предусмотрена возможность написания самопроверок.

Допустим, мы пишем функцию `add_two`, которая прибавляет 2 к любому переданному ей числу. Ярлык этой функции принимает целое число в качестве свойства и возвращает целое число в качестве итога. Когда мы выполняем и собираем эту функцию, Ржавчина выполняет всю проверку видов данных и проверку заимствований, которую вы уже изучили, чтобы убедиться, что, например, мы не передаём значение `String` или недопустимую ссылку в эту функцию. Но Ржавчина *не способен* проверить, что эта функция сделает именно то, что мы задумали, то есть вернёт свойство + 2, а не, скажем, свойство + 10 или свойство - 50! Вот тут-то и приходят на помощь проверки.

Мы можем написать проверки, которые утверждают, например, что когда мы передаём `3` в функцию `add_two`, возвращаемое значение будет `5`. Мы можем запускать эти проверки всякий раз, когда мы вносим изменения в нашу рукопись, чтобы убедиться, что любое существующее правильное поведение не изменилось.

Проверка - сложный навык: мы не сможем охватить все подробности написания хороших проверок в одной главе, но мы обсудим основные подходы к проверке в Ржавчине. Мы поговорим об изложениех и макросах, доступных вам для написания проверок, о поведении по умолчанию и свойствах, предусмотренных для запуска проверок, а также о том, как согласовать проверки в состоящие из разделов проверки и встроенные проверки.
