## Настройка сборок с режимами исполнений

В Ржавчине *режимы выпуска* — это предопределённые и настраиваемые режимы с различными настройками, которые позволяют программисту лучше управлять различные свойства сборки рукописи. Каждый режим настраивается независимо от других.

Cargo имеет два основных режима: режим `dev`, используемый Cargo при запуске `cargo build`, и режим `release`, используемый Cargo при запуске `cargo build --release`. Режим `dev` определён со значениями по умолчанию для разработки, а режим `release` имеет значения по умолчанию для сборок в исполнение.

Эти имена режимов могут быть знакомы по итогам ваших сборок:

<!-- manual-regeneration
anywhere, run:
cargo build
cargo build --release
and ensure output below is accurate
-->

```console
$ cargo build
    Finished dev [unoptimized + debuginfo] target(s) in 0.0s
$ cargo build --release
    Finished release [optimized] target(s) in 0.0s
```

`dev` и `release` — это разные режимы, используемые сборщиком.

Cargo содержит настройки по умолчанию для каждого режима, которые применяются, если вы явно не указали разделы `[profile.*]` в файле приложения *Cargo.toml*. Добавляя разделы `[profile.*]` для любого режима, который вы хотите настроить, вы переопределяете любое подмножество свойств по умолчанию. Например, вот значения по умолчанию для свойства `opt-level` для режимов `dev` и `release`:

<span class="filename">Файл: Cargo.toml</span>

```toml
[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3
```

Свойство `opt-level` управляет количеством переработок, которые Ржавчина будет применять к вашей рукописи, в ряде от 0 до 3. Использование большего количества переработок увеличивает время сборки, поэтому если вы находитесь в этапе разработки и часто собираете свою рукопись, целесообразно использовать меньшее количество переработок, чтобы сборка происходила быстрее, даже если в итоге рукопись будет работать медленнее. Поэтому `opt-level` по умолчанию для `dev` установлен в `0`. Когда вы готовы обнародовать свою рукопись, то лучше потратить больше времени на сборку. Вы собираете программу в режиме исполнения только один раз, но выполняться она будет многократно, так что использование режима исполнения позволяет увеличить скорость выполнения рукописи за счёт времени сборки. Вот почему по умолчанию `opt-level` для режима `release` равен `3`.

Вы можете переопределить настройки по умолчанию, добавив другое значение для них в *Cargo.toml*. Например, если мы хотим использовать уровень переработки 1 в режиме разработки, мы можем добавить эти две строки в файл *Cargo.toml* нашего дела:

<span class="filename">Файл: Cargo.toml</span>

```toml
[profile.dev]
opt-level = 1
```

Эта рукопись переопределяет настройку по умолчанию `0`. Теперь, когда мы запустим `cargo build`, Cargo будет использовать значения по умолчанию для режима `dev` дополнительно нашу настройку для `opt-level`. Поскольку мы установили для `opt-level` значение `1`, Cargo будет применять больше переработок, чем было задано по умолчанию, но не так много, как при сборке исполнения.

Полный список свойств настройки и значений по умолчанию для каждого режима вы можете найти в [пособия Cargo](https://doc.rust-lang.org/cargo/reference/profiles.html).
