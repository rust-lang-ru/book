## Дополнения и ящики

Первые части состоящие из разделов системы, которые мы рассмотрим — это дополнения и ящики.

*Дополнение (Раздел)*  — это наименьший размер рукописи, который сборщик Ржавчины рассматривает за раз. Даже если вы запустите `rustc` вместо `cargo` и передадите один файл с исходной рукописью (как мы уже делали в разделе «Написание и запуск приложения на Ржавчине» Главы 1), сборщик считает этот файл дополнением. Дополнения могут содержать разделы, и разделы могут быть определены в других файлах, которые собираются вместе с дополнением, как мы увидим в следующих главах.

Дополнение может быть одним из двух видов данных: двоичный дополнение или библиотечное дополнение. *Двоичные дополнения* — это приложения, которые вы можете собрать в исполняемые файлы, которые вы можете запускать, например программу приказной строки или отдельный вычислитель. У каждого двоичного дополнения должна быть функция с именем `main`, которая определяет, что происходит при запуске исполняемого файла. Все дополнения, которые мы создали до сих пор, были двоичными дополнениями.

*Библиотечные дополнения* не имеют функции `main` и не собираются в исполняемый файл. Вместо этого они определяют возможность, предназначенную для совместного использования другими делами. Например, дополнение `rand`, который мы использовали в [Главе 2]<!-- ignore --> обеспечивает возможность, которая порождает случайные числа. В большинстве случаев, когда Rustaceans говорят «дополнение», они имеют в виду библиотечное дополнение, и они используют «дополнение» взаимозаменяемо с общим подходом программирования «библиотека».

*Корневой раздел дополнения* — это исходный файл, из которого сборщик Ржавчины начинает собирать корневой раздел вашего дополнения (мы подробно объясним разделы в главе [«Определение разделов для управления видимости и закрытости»]<!-- ignore -->).

*Дополнение* — это совокупность из одного или нескольких разделов, предоставляющий . Дополнение содержит файл *Cargo.toml*, в котором описывается, как собирать эти дополнения. На самом деле Cargo — это дополнение, содержащее двоичный дополнение для средства приказной строки, который вы использовали для создания своей рукописи. Дополнение Cargo также содержит библиотечное дополнение, от которого зависит двоичный дополнение. Другие приложения тоже могут зависеть от библиотечного дополнения Cargo, чтобы использовать тот же ход мыслей, что и средство приказной строки Cargo.

Дополнение может содержать сколько угодно двоичных дополнений, но не более одного библиотечного дополнения. Дополнение должно содержать хотя бы один дополнение, библиотечный или двоичный.

Давайте пройдёмся по тому, что происходит, когда мы создаём дополнение. Сначала введём приказ `cargo new`:

```console
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

После того, как мы запустили `cargo new`, мы используем `ls`, чтобы увидеть, что создал Cargo. В папке приложения есть файл *Cargo.toml*, дающий нам дополнение. Также есть папка *src*, содержащая *main.rs*. Откройте *Cargo.toml* в письменном редакторе и обратите внимание, что в нём нет упоминаний о *src/main.rs*. Cargo следует соглашению о том, что *src/main.rs* — это корневой раздел двоичного дополнения с тем же именем, что и у дополнения. Точно так же Cargo знает, что если папка дополнения содержит *src/lib.rs*, дополнение содержит библиотечное дополнение с тем же именем, что и дополнение, а *src/lib.rs* является корневым разделом этого дополнения. Cargo передаёт файлы корневого раздела дополнения в `rustc` для сборки библиотечного или двоичного дополнения.

Здесь у нас есть дополнение, которое содержит только *src/main.rs*, что означает, что оно содержит только двоичный дополнение с именем `my-project`. Если дополнение содержит *src/main.rs* и *src/lib.rs*, он имеет два дополнения: двоичный и библиотечный, оба с тем же именем, что и дополнение. Дополнение может иметь несколько двоичных дополнений, помещая их файлы в папку *src/bin*: каждый файл будет отдельным двоичным дополнением.


[«Определение разделов для управления видимости и закрытости»]: ch07-02-defining-modules-to-control-scope-and-privacy.html
[Главе 2]: ch02-00-guessing-game-tutorial.html#generating-a-random-number