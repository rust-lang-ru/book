## Дополнения и ящики

Первые части состоящие из разделов системы, которые мы рассмотрим — это дополнения и ящики.

*Ящик (Crate)*  — это наименьшая единица рукописи, которую сборщик Ржавчины рассматривает за раз. Даже если вы запустите `rustc` вместо `cargo` и передадите один файл с исходной рукописью (как мы уже делали в разделе «Написание и запуск приложения на Ржавчине» Главы 1), сборщик считает этот файл ящиком. Ящики могут содержать разделы, и разделы могут быть изложены и описаны в других файлах, которые собираются вместе с ящиком, как мы увидим в следующих главах.

Ящик может быть одним из двух видов: исполняемый ящик или библиотечный ящик. *Исполняемые ящики* — это разделы рукописи, которые вы можете собрать в исполняемый файл, который вы можете запускать, например программа приказной строки или отдельный вычислитель. У каждого исполняемого ящика должна быть функция с именем `main`, которая определяет, что происходит при запуске исполняемого файла. Все ящики, которые мы создали до сих пор, были исполняемыми ящиками.

*Библиотечные ящики* не имеют функции `main` и не собираются в исполняемый файл. Вместо этого они определяют возможности, предназначенные для совместного использования другими дополнениями и приложениями. Например, ящик `rand`, который мы использовали в [Главе 2]<!-- ignore --> обеспечивает возможность, которая порождает случайные числа. В большинстве случаев, когда Rustaceans говорят «ящик», они имеют в виду библиотечный ящик, и они используют «ящик» взаимозаменяемо с общим подходом правил написания и составления «библиотеки».

*Корневой раздел ящика* — это исходный файл, из которого сборщик Ржавчины начинает собирать корневой раздел вашего ящика (мы подробно рассмотрим разделы в главе [«Определение разделов для управления видимости и закрытости»]<!-- ignore -->).

*Дополнение* — это совокупность из одного или нескольких ящиков, предоставляющий набор возможностей. Дополнение содержит файл *Cargo.toml*, в котором описывается, как собирать эти ящики. Cargo — это дополнение, содержащее исполняемый ящик для управления приказной строкой, которая используется для сборки всей рукописи в приложение. Дополнение Cargo также содержит библиотечный ящик, от которого зависит исполняемый ящик. Другие приложения тоже могут зависеть от библиотечного ящика Cargo, чтобы использовать тот же приём, что и средство приказной строки Cargo.

Дополнение может содержать сколько угодно исполняемых ящиков, но не более одного библиотечного ящика. Дополнение должно содержать хотя бы один ящик, библиотечный или исполняемый.

Давайте пройдёмся по тому, что происходит, когда мы создаём дополнение. Сначала введём приказ `cargo new`:

```console
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

После того, как мы запустили `cargo new`, мы используем `ls`, чтобы увидеть, что создал Cargo. В папке дополнения есть файл *Cargo.toml*, дающий нам дополнение. Также есть папка *src*, содержащая *main.rs*. Откройте *Cargo.toml* в письменном редакторе и обратите внимание, что в нём нет упоминаний о *src/main.rs*. Cargo следует соглашению о том, что *src/main.rs* — это корневой раздел исполняемого ящика с тем же именем, что и у дополнения. Так же Cargo знает, что если папка дополнения содержит *src/lib.rs*, дополнение содержит библиотечный ящик с тем же именем, что и у дополнения, а *src/lib.rs* является корневым ящиком этого дополнения. Cargo передаёт файлы корневого раздела ящика в `rustc` для сборки библиотеки или исполняемого приложения.

Здесь у нас есть дополнение, которое содержит только *src/main.rs*, что означает, что оно содержит только исполняемый дополнение с именем `my-project`. Если дополнение содержит *src/main.rs* и *src/lib.rs*, оно имеет два ящика: исполняемый и библиотечный, оба с тем же именем, что и дополнение. Дополнение может иметь несколько исполняемых ящиков, помещая их содержимое в папку *src/bin*: каждый файл будет отдельным исполняемым ящиком.


[«Определение разделов для управления видимости и закрытости»]: ch07-02-defining-modules-to-control-scope-and-privacy.html
[Главе 2]: ch02-00-guessing-game-tutorial.html#Создание-случайного-числа