## Чтение файла

Теперь добавим возможность чтения файла, указанного в значении переменной приказной строки `file_path`. Во-первых, нам нужен пример файла для проверки: мы будем использовать файл с небольшим размером рукописи всего в несколько строк с несколькими повторяющимися словами. В приложении 12-3 представлено стихотворение Эмили Дикинсон, которое будет хорошо работать! Создайте файл с именем _poem.txt_ в корне вашего приложения и введите стихотворение "I’m nobody! Who are you?"

<span class="filename">Файл: poem.txt</span>

```text
{{#include ../listings/ch12-an-io-project/listing-12-03/poem.txt}}
```

<span class="caption">Приложение 12-3: Стихотворение Эмили Дикинсон - хороший пример для проверки</span>

Текст на месте, изменените _src/main.rs_ и добавьте рукопись для чтения файла, как показано в приложении 12-4.

<span class="filename">Файл: src/main.rs</span>

```rust,should_panic,noplayground
{{#rustdoc_include ../listings/ch12-an-io-project/listing-12-04/src/main.rs:here}}
```

<span class="caption">Приложение 12-4: Чтение содержимого файла указанного во втором переменной</span>

Во-первых, мы добавляем ещё одно указание `use` чтобы подключить соответствующую часть встроенной библиотеки: нам нужен `std::fs` для обработки файлов.

В `main` мы добавили новое указание: способ `fs::read_to_string` принимает `file_path`, открывает этот файл и вызывает `std::io::Result<String>`, который возвращает содержимое файла.

После этого, мы снова вызвали макрос `println!` для вывода значения `contents` после чтения файла, таким образом мы можем проверить, что приложение отрабатывает до этого места.

Давайте запустим эту рукопись с любым значением в качестве первого значения приказной строки (потому что мы ещё не подготовили возможность поиска) и файл _poem.txt_ как второе значение:

```console
{{#rustdoc_include ../listings/ch12-an-io-project/listing-12-04/output.txt}}
```

Отлично! Эта рукопись считывает содержимое файла, а затем выводит его в виде `Result<String>`. Но у приложения есть несколько недостатков. Прежде всего, способ (функция) `main` решает слишком много задач: как правило способ (функция) понятнее и проще в обслуживании если она воплощает только одно действие. Другая неполадка заключается в том, что мы не обрабатываем ошибки так хорошо, как могли бы. Пока наша приложение небольшая, то эти недостатки не являются большой неполадкой, но по мере роста приложения эти недостатки будет всё труднее исправлять. Хорошим решением является начинать переработку рукописи на раннем этапе разработки приложения, потому что гораздо проще перерабатывать рукописи меньших размеров . Мы сделаем это далее.
